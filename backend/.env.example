# ============================================
# Backend API 環境變數範例
# ============================================

# ============================================
# 必填項目
# ============================================

# MongoDB（資料持久化）
MONGODB_URL=mongodb://mongodb:27017
MONGODB_DATABASE=refactor_agent

# PostgreSQL（Agent 會話持久化 - 必填！）
# ⚠️ Agent 無法在沒有 PostgreSQL 的情況下運行
POSTGRES_URL=postgresql://langgraph:langgraph_secret@postgres:5432/langgraph

# JWT 認證
# ⚠️ 生產環境務必更換為安全的隨機字串
JWT_SECRET_KEY=your-secret-key-change-in-production-please
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_HOURS=24

# Anthropic API（AI Agent 必需）
# ⚠️ 容器建立時會注入到 Agent 容器
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# Docker 設定
DOCKER_BASE_IMAGE=refactor-base:latest
DOCKER_NETWORK=refactor-network
DOCKER_VOLUME_PREFIX=/tmp/refactor-workspaces

# ============================================
# 可選項目
# ============================================

# API 設定
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=1
DEBUG=false

# 容器資源限制
CONTAINER_CPU_LIMIT=2.0
CONTAINER_MEMORY_LIMIT=2g

# Git 設定
GIT_CLONE_TIMEOUT=300
GIT_DEPTH=1

# Log 設定
LOG_LEVEL=INFO

# Anthropic 模型設定（可選）
ANTHROPIC_MODEL=claude-sonnet-4-5-20250929

# ============================================
# 說明
# ============================================
# 1. POSTGRES_URL 必填 - Agent 需要 PostgreSQL 進行會話持久化
# 2. ANTHROPIC_API_KEY 必填 - 容器建立時會注入到 Agent 容器
# 3. JWT_SECRET_KEY 生產環境務必更換
# 4. Docker Compose 使用服務名稱（mongodb, postgres）
# 5. 本地開發使用 localhost 替代服務名稱

# ============================================
# 開發環境快速設定
# ============================================
# 1. 複製此檔案：cp .env.example .env
# 2. 填入 ANTHROPIC_API_KEY
# 3. 啟動服務：docker-compose -f devops/docker-compose.yml up -d
