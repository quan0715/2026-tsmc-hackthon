# CLI 重大更新：主選單模式 🎉

## 更新日期
2026-02-02

## 主要變更

### 🔄 從線性流程改為主選單模式

**之前**：
- 線性執行：登入 → 選專案 → provision → 執行 agent → 結束
- 只能執行一次流程
- 沒有專案管理功能

**現在**：
- 互動式主選單
- 可執行多次操作
- 完整的專案生命週期管理
- 就像小型前端介面

## 新增功能

### 專案管理
- ✅ **列出所有專案** - 查看和選擇專案
- ✅ **建立新專案** - 快速建立測試專案
- ✅ **刪除專案** - 清理不需要的專案

### 容器管理
- ✅ **Provision 專案** - 建立 Docker 容器
- ✅ **停止容器** - 釋放系統資源

### Agent 執行
- ✅ **執行 AI Agent** - 啟動程式碼分析
- ✅ **串流日誌** - 即時查看執行過程
- ✅ **查詢狀態** - 檢查 Agent 執行結果

## 使用方式

```bash
python3 cli.py
```

1. 按 Enter 登入（預設帳號）
2. 選擇功能 1-8 進行各種操作
3. 完成後按 Enter 返回主選單
4. 選擇 0 退出

## 主要改進

### 1. 持續互動
不再是「用完就退出」，現在可以：
- 管理多個專案
- 切換專案
- 反覆執行操作

### 2. 當前專案機制
- 選擇一個專案作為「當前專案」
- 大部分操作作用於當前專案
- 隨時可以切換

### 3. 更好的錯誤處理
- 操作失敗不會退出程式
- 按 Enter 返回主選單繼續
- Ctrl+C 中斷操作

### 4. 自動化功能
- 串流日誌可自動使用最新 Run ID
- 註冊失敗自動登入
- 預設值讓操作更快速

## 向後相容性

✅ 所有原有功能保持不變
✅ 預設測試帳號和專案仍然可用
✅ API 呼叫方式完全相同

## 文檔

- **CLI_MENU_GUIDE.md** - 完整的主選單使用指南
- **QUICK_TEST.md** - 快速測試指南（已更新）
- **CLI_USAGE.md** - 原有使用說明（參考）

## 範例流程

### 快速開始
```
登入 → 功能2（建立專案）→ 功能4（provision）→ 功能6（執行agent）→ 功能7（查看日誌）
```

### 管理多專案
```
登入 → 功能1（列出專案）→ 選擇專案A → 功能6（執行）→
功能1（切換到專案B）→ 功能7（查看專案B日誌）
```

## 升級指南

### 如果你在使用舊版 CLI

1. 拉取最新代碼
2. 重新執行 `python3 cli.py`
3. 享受新的主選單模式！

沒有額外的設定需要。所有功能都是向後相容的。

## 最新改進（2026-02-02 更新）

### ✅ 停止專案可重新 Provision
- 停止的專案（狀態 STOPPED）現在可以重新 provision
- 系統會自動清理舊容器並建立新容器
- 使用流程：功能 5（停止容器）→ 功能 4（重新 provision）

## 未來計劃

- [ ] 批量操作（一次操作多個專案）
- [ ] 專案狀態儀表板
- [ ] 下載 artifacts 功能
- [ ] 匯出執行報告
- [ ] 自訂快捷鍵

---

**享受新的 CLI 體驗！** 🚀

有任何問題或建議，請在 GitHub Issues 回報。
